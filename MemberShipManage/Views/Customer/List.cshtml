@{
    Layout = null;
}

@model MemberShipManage.Models.CustomerListModel
@using Webdiyer.WebControls.Mvc;
<table id="cutomerlist" class="table table-striped table-bordered table-condensed">
    <tr style="background-color:#eee;height:35px;">
        <th>用户名</th>
        <th>姓名</th>
        <th>性别</th>
        <th>余额</th>
        <th>返利</th>
        <th>推荐人</th>
        <th>注册日期</th>
        <th>操作</th>
    </tr>
    @if (Model != null && Model.CustomerList != null && Model.CustomerList.Count() > 0)
    {
        foreach (var customer in Model.CustomerList)
        {
            <tr>
                <td style="width:180px">@customer.UserNo</td>
                <td style="width:120px">@customer.Name</td>
                <td style="width:80px">@(customer.Sex == 1 ? "男" : "女")</td>
                <td style="width:150px;color:blue">
                    @(customer.Amount)
                </td>
                <td style="width:80px;color:green">@(customer.RebateAmount.GetValueOrDefault(0))</td>
                <td style="width:80px">@(customer.ParentCustomerName ?? "N/A")</td>
                <td style="width:150px">
                    @customer.InDate.GetValueOrDefault(DateTime.Now).ToString("yyyy-MM-dd HH:mm")
                </td>
                <td style="width:200px">
                    <button type="button" class="btn btn-success" onclick="showRechargeModal(@customer.ID,'@customer.UserNo','@customer.Name')">充值</button>&nbsp;
                    <button type="button" class="btn btn-primary" onclick="showUpdateModal(@customer.ID,'@customer.UserNo','@customer.Name','@customer.Sex')">编辑</button>&nbsp;
                    <button type="button" class="btn btn-danger" onclick="deleteCustomer(@customer.ID)">删除</button>
                </td>
            </tr>
        }
    }
</table>
@if (Model.CustomerList != null && Model.CustomerList.Count > 0)
{
    <div class="card bg-info text-white" style="height:30px;line-height:30px">
        <div class="card-body">
            共有 <span style="color: blue" id="ft">@Model.CustomerList.TotalItemCount</span> 条记录 当前是第 <span style="color: blue">@(Model.CustomerList.CurrentPageIndex)</span>
            页 共 <span style="color: blue">@Model.CustomerList.TotalPageCount</span> 页&nbsp;&nbsp;&nbsp;&nbsp;
            @if (Model.CustomerList.CurrentPageIndex > 1)
            {
                @Ajax.ActionLink("首页", "List",
                          new {
                                PageIndex=0,
                                PageSize= Model.CustomerList.PageSize,
                                Model.Name,
                                Model.UserNo,
                                Model.Sex
                          },
                          new AjaxOptions() { HttpMethod = "Get", InsertionMode = InsertionMode.Replace, UpdateTargetId = "customerlist" }, new { style = "color:blue" })
                @Ajax.ActionLink("上一页", "List",
                          new
                          {
                              PageIndex = Model.CustomerList.CurrentPageIndex-1,
                              PageSize = Model.CustomerList.PageSize,
                              Model.Name,
                              Model.UserNo,
                              Model.Sex
                          },
                          new AjaxOptions() { HttpMethod = "Get", InsertionMode = InsertionMode.Replace, UpdateTargetId = "customerlist" }, new { style = "margin-left:5px;color:blue" })
            }
            else
            {
                <text>首页&nbsp;</text>
                <text>上一页&nbsp;</text>
            }
            @if (Model.CustomerList.CurrentPageIndex < Model.CustomerList.TotalPageCount)
            {
                @Ajax.ActionLink("下一页", "List",
                          new
                          {
                              PageIndex = Model.CustomerList.CurrentPageIndex + 1,
                              PageSize = Model.CustomerList.PageSize,
                              Model.Name,
                              Model.UserNo,
                              Model.Sex
                          },
                          new AjaxOptions() { HttpMethod = "Get", InsertionMode = InsertionMode.Replace, UpdateTargetId = "customerlist" }, new { style = "margin-left:5px;color:blue" })
                @Ajax.ActionLink("末页", "List",
                           new
                           {
                               PageIndex = Model.CustomerList.TotalPageCount,
                               PageSize = Model.CustomerList.PageSize,
                               Model.Name,
                               Model.UserNo,
                               Model.Sex
                           },
                          new AjaxOptions() { HttpMethod = "Get", InsertionMode = InsertionMode.Replace, UpdateTargetId = "customerlist" }, new { style = "margin-left:5px;color:blue" })
            }
            else
            {
                <text>下一页&nbsp;</text>
                <text>末页&nbsp;</text>
            }
        </div>
    </div>
}
else
{
    <p class="text-center text-danger">没有符合条件的记录</p>
}

